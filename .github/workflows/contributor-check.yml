name: ğŸ¤ Contributor Validation

on:
  pull_request:
    branches: [ main ]

jobs:
  contributor-checks:
    name: ğŸ” Contributor Environment Check
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4

    - name: ğŸ Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    - name: âœ… Validate requirements.txt
      run: |
        echo "Checking requirements.txt..."
        if [ -f requirements.txt ]; then
          echo "âœ… requirements.txt found"
          pip install -r requirements.txt --dry-run
          echo "âœ… requirements.txt is valid"
        else
          echo "âŒ requirements.txt missing"
          exit 1
        fi

    - name: âœ… Check for .env.example
      run: |
        if [ -f .env.example ]; then
          echo "âœ… .env.example found"
        else
          echo "âŒ .env.example missing"
          exit 1
        fi

    - name: âœ… Validate core imports
      run: |
        pip install -r requirements.txt
        python -c "
        try:
            import flask
            import flask_socketio
            print('âœ… Core web dependencies work')
        except ImportError as e:
            print(f'âŒ Core import failed: {e}')
            exit(1)
        "

    - name: âœ… Check web interface syntax
      run: |
        python -m py_compile Aetherra/gui/web_interface_server.py
        echo "âœ… Web interface syntax is valid"

    - name: âœ… Check AI OS launcher syntax
      run: |
        if [ -f aetherra_os_launcher.py ]; then
          python -m py_compile aetherra_os_launcher.py
          echo "âœ… OS launcher syntax is valid"
        fi
